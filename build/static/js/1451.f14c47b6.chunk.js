"use strict";(self.webpackChunkerp_web=self.webpackChunkerp_web||[]).push([[1451],{5145:function(e,n,t){t.d(n,{Z:function(){return g}});var r=t(3433),o=t(1413),a=t(4925),s=t(9439),i=t(8597),c=t(2996),u=t(7846),l=t(9039),d=t(2791),v=t(35),f=t(1730),p=t(1042),_=t(3329),m=function(e){var n=e.setSearch;return(0,_.jsx)("div",{className:"custom_search_input_container",children:(0,_.jsxs)("div",{className:"custom_search_input_content",children:[(0,_.jsx)(p.ZP,{className:"custom_search_input px-5",onChange:function(e){n(e)}}),(0,_.jsx)(f.Z,{className:"custom_search_icon"})]})})},h=t(6432),S=["editing","dataIndex","title","inputType","record","index","children"],g=function(e){var n=e.columns,t=void 0===n?[]:n,f=e.data,g=void 0===f?[]:f,x=e.rowClassName,y=void 0===x?"":x,Z=e.loading,w=void 0!==Z&&Z,I=e.selectAble,b=void 0!==I&&I,k=e.selectedRows,O=void 0===k?[]:k,j=e.onSelect,E=e.pagination,C=void 0===E||E,K=e.current,B=e.pageSize,D=e.total,L=e.pageSizeOptions,N=void 0===L?[10,20,50,100]:L,T=e.onChange,U=(e.isEditing,e.scrollX),R=void 0===U?768:U,z=e.scrollY,A=void 0===z?null:z,F=e.searchAble,q=void 0===F||F,G=e.searchKeys,P=void 0===G?[]:G,Q=e.cardClassName,Y=e.rowKey,H=void 0===Y?"OID":Y,J=e.selectionType,M=void 0===J?"checkbox":J,X=e.summary,$=void 0===X?function(){}:X,V=(0,d.useState)(""),W=(0,s.Z)(V,2),ee=W[0],ne=W[1],te=(0,r.Z)((0,h.j)(g)).filter((0,p.cj)(ee,P)),re={};return null!=R&&(re.x=R),null!=A&&(re.y=A),(0,_.jsxs)(v.Z,{className:"table_card_container ".concat(Q),children:[q&&(0,_.jsx)(m,{setSearch:ne}),(0,_.jsx)(l.Z,{columns:t,dataSource:te,rowClassName:y,loading:w,rowKey:H,onChange:T,rowSelection:b&&{selectedRows:O,onChange:j,type:M,selectedRowKeys:O},scroll:re,pagination:C&&{total:D,pageSize:B,current:K,showSizeChanger:!0,size:"small",pageSizeOptions:N},components:{body:{cell:function(e){var n=e.editing,t=e.dataIndex,r=e.title,s=e.inputType,l=(e.record,e.index,e.children),d=(0,a.Z)(e,S),v="number"===s?(0,_.jsx)(i.Z,{}):(0,_.jsx)(c.Z,{});return(0,_.jsx)("td",(0,o.Z)((0,o.Z)({},d),{},{children:n?(0,_.jsx)(u.Z.Item,{name:t,style:{margin:0},rules:[{required:!0,message:"Please Input ".concat(r,"!")}],children:v}):l}))}}},summary:$})]})}},1483:function(e,n,t){t.d(n,{S:function(){return o}});var r=t(3952),o=function(e){return{type:r.JF,payload:e}}},1451:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r=t(9439),o=t(5145),a=t(3782),s=t(5421),i=t(1413),c=t(6403),u=t(2917),l=t(3418),d=t(4165),v=t(5861),f=t(1381),p=t(3932),_=t(6432),m=function(){var e=(0,v.Z)((0,d.Z)().mark((function e(n){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.get("".concat(p.vf,"?organization_ID=").concat(n)).then((function(e){return(0,_.j)(e.data)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=function(){var e=(0,v.Z)((0,d.Z)().mark((function e(n,t){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,f.Z.get("".concat(p.lq,"?organization_ID=").concat(n,"&user_ID=").concat(parseInt(t))).then((function(e){return(0,_.j)(e.data)}));case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=[];case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),S=function(){var e=(0,v.Z)((0,d.Z)().mark((function e(n){return(0,d.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.post(p._E,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),g="FL_USER_RIGHTS_USERS_LIST",x="FL_USER_RIGHTS_BOOKS_LIST",y=t(9655),Z=t(6765),w=t(9434);function I(e){var n=e.listKey,t=void 0===n?"":n,r=e.userId,o=void 0===r?null:r,a=e.loadUserList,d=void 0===a||a,v=(0,w.v9)((function(e){return e.configs.location})),f=(0,c.NL)(),p=function(e){f.invalidateQueries([x]),f.invalidateQueries([g]),y.Am.success(e)};return{getUsersList:d?(0,u.a)({queryKey:[g],queryFn:function(){return m(v)},onError:function(e){return y.Am.error((0,s.nU)(e))}}):[],getBooksList:(0,u.a)({queryKey:[x,t],queryFn:function(){return h(v,o)},onError:function(e){return y.Am.error((0,s.nU)(e))}}),assignBooks:(0,l.D)({mutationFn:function(e){return S((0,i.Z)((0,i.Z)({},e),{},{organization_ID:v}))},onSuccess:function(){return p(Z.QK.SaveMsg)},onError:function(e){return y.Am.error((0,s.nU)(e))}})}}var b=t(2791),k=t(9188),O=t(3329);function j(e){var n=e.userId,t=e.selectedBooks,r=e.setSelectedBooks,a=I({listKey:n,userId:n,loadUserList:!1}).getBooksList,i=(0,k.m8)().getList,c=[{title:"Code",dataIndex:"ST_BOOK_CODE",sorter:function(e,n){return(0,s.$P)(e,n,"ST_BOOK_CODE")}},{title:"Description",dataIndex:"ST_BOOK_DESC",sorter:function(e,n){return(0,s.Ew)(e,n,"ST_BOOK_DESC")}}],u=i.isError?[]:null!==i&&void 0!==i&&i.data&&n?null===i||void 0===i?void 0:i.data:[],l=a.isError?[]:(null===a||void 0===a?void 0:a.data)||[];return(0,b.useEffect)((function(){if((null===u||void 0===u?void 0:u.length)>0&&(null===l||void 0===l?void 0:l.length)>0){var e,n=null!==(e=null===l||void 0===l?void 0:l.map((function(e){return e.GL_BOOKS})))&&void 0!==e?e:[];r(n)}else r([])}),[null===a||void 0===a?void 0:a.data,null===i||void 0===i?void 0:i.data]),(0,O.jsx)("div",{className:"mt-4",children:(0,O.jsx)(o.Z,{columns:c,data:u,selectAble:!0,selectedRows:t,onSelect:function(e){return r(e)},loading:a.isLoading,scrollY:200,cardClassName:"custom_table_card_user_accounts pt-2",searchKeys:["ST_BOOK_CODE","ST_BOOK_DESC"]})})}var E=t(1483);function C(){var e=I({listKey:""}),n=e.getUsersList,t=e.assignBooks,i=(0,w.I0)(),c=(0,b.useState)(""),u=(0,r.Z)(c,2),l=u[0],d=u[1],v=(0,b.useState)([]),f=(0,r.Z)(v,2),p=f[0],_=f[1],m=[{dataIndex:"key",rowScope:"row",width:50},{title:"Name",dataIndex:"user_name",sorter:function(e,n){return(0,s.Ew)(e,n,"user_name")}},{title:"Email",dataIndex:"email",sorter:function(e,n){return(0,s.Ew)(e,n,"email")}}],h=[{label:"Update",key:"update",onClick:function(){return function(){var e={book_ids:p,action:"update",user_ID:l};i((0,E.S)(!0)),t.mutateAsync(e).then((function(){i((0,E.S)(!1)),_([])})).catch((function(){return i((0,E.S)(!1))}))}()},disabled:!l}],S=n.isError?[]:(null===n||void 0===n?void 0:n.data)||[];return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(a.Z,{name:"Books",buttons:h}),(0,O.jsxs)("div",{className:"app_page_content user_accounts_container",children:[(0,O.jsx)(o.Z,{columns:m,data:S,selectAble:!0,loading:n.isLoading,selectionType:"radio",onSelect:function(e,n,t,r){var o;d(null===n||void 0===n||null===(o=n[0])||void 0===o?void 0:o.OID)},selectedRows:[l],scrollY:200,cardClassName:"custom_table_card_user_accounts",searchKeys:["user_name","email"]}),(0,O.jsx)(j,{userId:l,selectedBooks:p,setSelectedBooks:_})]})]})}}}]);
//# sourceMappingURL=1451.f14c47b6.chunk.js.map
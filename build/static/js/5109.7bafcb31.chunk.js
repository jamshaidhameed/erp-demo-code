"use strict";(self.webpackChunkerp_web=self.webpackChunkerp_web||[]).push([[5109],{1067:function(e,n,t){var a=t(1413),i=t(7808),o=t(3329);n.Z=function(e){return(0,o.jsx)(i.Z,(0,a.Z)((0,a.Z)({centered:!0},e),{},{children:e.children}))}},8749:function(e,n,t){var a=t(1413),i=t(7106),o=t(43),l=t(7846),r=t(5),u=t(763),d=t(2791),s=t(6432),c=t(3329);n.Z=function(e){var n=e.label,t=e.name,m=e.messageLabel,p=e.placeholder,f=void 0===p?"Search":p,v=e.onChange,_=e.onSearch,y=e.value,b=e.options,h=void 0===b?[]:b,x=e.required,Z=void 0!==x&&x,g=e.controlled,j=void 0!==g&&g,E=e.autoFocus,C=void 0!==E&&E,I=e.allowClear,S=void 0!==I&&I,F=e.loading,A=void 0!==F&&F,D=e.className,w=void 0===D?"":D,L=e.disabled,N=void 0!==L&&L,M=e.parentClassName,O=void 0===M?"":M,T=e.style,k=void 0===T?{}:T,P=e.async,R=void 0!==P&&P,Y=e.selectedOption,H=void 0===Y?null:Y,V=e.defaultValue,$=void 0===V?"":V,q=(0,d.useMemo)((function(){return(0,u.debounce)((function(e){R&&_(e)}),500)}),[]),B=(0,d.useMemo)((function(){return A?(0,c.jsx)(o.Z,{style:{fontSize:20},indicator:(0,c.jsx)(i.Z,{style:{color:"#635bff"},spin:!0})}):""}),[A]),U=(0,d.useMemo)((function(){return(0,s.X)(h,"value")}),[h]),K=function(e,n){var t;return(null!==(t=n.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())},z=function(e,n){var t;return v({value:null!==(t=null===n||void 0===n?void 0:n.label)&&void 0!==t?t:e,option:n,defaultValue:""})},J=function(){null==H&&y&&z("",null)};return(0,d.useEffect)((function(){$&&U[$]&&v({value:U[$].label,option:U[$],defaultValue:""})}),[$,U]),(0,c.jsx)(l.Z.Item,{name:t,style:k,className:O,validateTrigger:"onBlur",label:n,rules:[{required:Z,message:"Please select ".concat(m,".")}],children:(0,c.jsx)(r.Z,(0,a.Z)({},function(){var e={popupClassName:"antd-selectInput-custom ".concat(w),placeholder:f,autoFocus:C,allowClear:S,disabled:N,options:h,notFoundContent:B,filterOption:!R&&K};return R&&(e.onSearch=q),j&&(e.value=y,e.onChange=function(e){return z(e,null)},e.onSelect=z,e.onBlur=J),e}()))})}},8588:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(1413),i=t(2648),o=t(7846),l=(t(2791),t(7892)),r=t.n(l),u=t(3329),d=i.Z.RangePicker;function s(e){var n=e.label,t=e.name,l=e.messageLabel,s=e.placeholder,c=e.onChange,m=e.value,p=e.showRange,f=void 0!==p&&p,v=e.showTime,_=void 0!==v&&v,y=e.required,b=void 0!==y&&y,h=e.controlled,x=void 0!==h&&h,Z=e.autoFocus,g=void 0!==Z&&Z,j=e.allowClear,E=void 0!==j&&j,C=e.minDate,I=void 0===C?null:C,S=e.className,F=void 0===S?"":S,A=e.disabled,D=void 0!==A&&A,w=e.popupClassName,L=void 0===w?"":w,N="hh:mm:ss A",M="MMMM D, YYYY",O=function(e,n){return c((t=n)?_?new Date(t):new Date("".concat(t," ").concat((new Date).toLocaleTimeString())):null);var t},T=function(){var e={popupClassName:L,className:"antd-input-custom antd-dateInput-custom ".concat(F),placeholder:s,autoFocus:g,allowClear:E,disabled:D,format:_?"".concat(M," ").concat(N):M,showTime:_?{format:N}:null};return x&&(e.value=m?r()(m):null,e.onChange=O),e};return(0,u.jsx)(o.Z.Item,{name:t,validateTrigger:"onBlur",label:n,rules:[{required:b,message:"Please enter ".concat(l,".")}],children:f?(0,u.jsx)(d,(0,a.Z)({},T())):(0,u.jsx)(i.Z,(0,a.Z)((0,a.Z)({},T()),{},{disabledDate:function(e){return I?e<I:null}}))})}},9543:function(e,n,t){t.d(n,{LM:function(){return p},p8:function(){return f},pi:function(){return v},y4:function(){return m}});var a=t(6765),i=t(7892),o=t.n(i),l=t(3666),r=t.n(l),u=t(130),d=t.n(u),s=t(3027),c=t.n(s);o().extend(r()),o().extend(d()),o().extend(c());var m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.nH[2];return o().utc(o()(e).format(a.nH[1])).local().format(n)},p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.nH[2];return o()(e).format(n)},f=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.nH[9];return o()(m(e,n))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.nH[9];return o()().format(e)}},5109:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var a=t(9439),i=t(2791),o=t(5145),l=t(3782),r=t(1413),u=t(7846),d=t(6106),s=t(914),c=t(7145),m=t(6765),p=t(9434),f=t(9655),v=t(1067),_=t(1736),y=t(5806),b=t(7951),h=t(1483),x=t(5421),Z=t(6850),g=t(8588),j=t(9543),E=t(9188),C=t(8749),I=t(3329),S=function(e){var n,t,o,l,S=e.open,F=e.onCancel,A=e.selected,D=e.submitRecord,w=e.invalidateList,L=(0,p.I0)(),N=u.Z.useForm(),M=(0,a.Z)(N,1)[0],O=(0,i.useState)({financial_year_description:"",start_date:null,end_date:null,minimum_salary:0,employee_contribution:0,employee_amount:0,employer_contribution:0,employer_amount:0,post:!0}),T=(0,a.Z)(O,2),k=T[0],P=T[1],R=(0,i.useState)((0,r.Z)({},m.$I)),Y=(0,a.Z)(R,2),H=Y[0],V=Y[1],$=(0,E.qM)().getList,q=$.isError?[]:(null===$||void 0===$||null===(n=$.data)||void 0===n?void 0:n.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{value:e.OID,label:e.OID.toString()})})))||[],B=function(){(0,Z.mJ)(null===A||void 0===A?void 0:A.id).then((function(e){L((0,h.S)(!1)),function(e){var n=e.start_date?(0,j.p8)(e.start_date):null,t=e.end_date?(0,j.p8)(e.end_date):null;M.setFields([{name:"financial_year_description",value:e.financial_year_description},{name:"start_date",value:n},{name:"end_date",value:t},{name:"minimum_salary",value:e.minimum_salary},{name:"employee_contribution",value:e.employee_contribution},{name:"employee_amount",value:e.employee_amount},{name:"employer_contribution",value:e.employer_contribution},{name:"employer_amount",value:e.employer_amount},{name:"post",value:1===e.post}]),V((function(n){return(0,r.Z)((0,r.Z)({},n),{},{defaultValue:e.financial_year_id})}))}(e.data)})).catch((function(e){L((0,h.S)(!1)),f.Am.error((0,x.nU)(e)),w(),F()}))};return(0,i.useEffect)((function(){S&&(M.resetFields(),V((0,r.Z)({},m.$I)),A&&B())}),[S,A]),(0,I.jsx)(v.Z,{title:A?"Edit EOBI":"Add EOBI",width:700,open:S,onCancel:F,onOk:function(){M.validateFields().then((function(e){A&&(e.eobi_id=A.id),function(e){L((0,h.S)(!0)),e.post=e.post?1:0,e.financial_year_id=parseInt(H.value),e.start_date=(0,j.LM)(new Date(e.start_date),m.nH[9]),e.end_date=(0,j.LM)(new Date(e.end_date),m.nH[9]),D.mutateAsync(e).then((function(){L((0,h.S)(!1)),F()})).catch((function(){return L((0,h.S)(!1))}))}(e)})).catch((function(){return f.Am.error(m.QK.FormValidationMsg)}))},okText:"Submit",children:(0,I.jsx)(_.Z,{name:c.S.PR_HR_EOBI_FORM,className:"p-5",form:M,initialValues:k,children:(0,I.jsxs)(d.Z,{align:"middle",justify:"space-between",children:[(0,I.jsx)(s.Z,{lg:11,children:(0,I.jsx)(C.Z,{label:"Financial Year Id",options:q,loading:$.isLoading,controlled:!0,onChange:function(e){V((function(n){return(0,r.Z)((0,r.Z)({},n),e)}));var n=null===q||void 0===q?void 0:q.find((function(n){return n.label===e.value}));if(n){var t=n.FROM_DATE?(0,j.p8)(n.FROM_DATE):null,a=n.TO_DATE?(0,j.p8)(n.TO_DATE):null;M.setFields([{name:"financial_year_description",value:n.ST_FIN_YEAR_DESC},{name:"start_date",value:t},{name:"end_date",value:a}])}else M.setFields([{name:"financial_year_description",value:""},{name:"start_date",value:null},{name:"end_date",value:null}])},messageLabel:"financial year id",required:!0,value:null!==(t=null===H||void 0===H?void 0:H.value)&&void 0!==t?t:"",selectedOption:null!==(o=null===H||void 0===H?void 0:H.option)&&void 0!==o?o:null,defaultValue:null!==(l=null===H||void 0===H?void 0:H.defaultValue)&&void 0!==l?l:""})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(y.U,{label:"Financial Year Description",type:m.Ar.text,disabled:!0,name:"financial_year_description",placeholder:"Enter description"})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(g.Z,{popupClassName:"responsive_datepicker",label:"Financial Start Date",disabled:!0,name:"start_date",placeholder:"Enter Start Date"})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(g.Z,{popupClassName:"responsive_datepicker",label:"Financial End Date",disabled:!0,name:"end_date",placeholder:"Enter End Date"})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(y.U,{label:"Minimum Salary",type:m.Ar.number,controlled:!0,required:!0,messageLabel:"minimum salary",onChange:function(e){P((0,r.Z)((0,r.Z)({},k),{},{minimum_salary:e}))},name:"minimum_salary",placeholder:"Enter minimum salary",onlyNumbers:!0})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(y.U,{label:"Employee Contribution (%)",type:m.Ar.number,disabled:!k.minimum_salary,controlled:!0,onChange:function(e){if(e<100){var n=k.minimum_salary/100*e;M.setFieldValue("employee_amount",n)}},name:"employee_contribution",placeholder:"Enter employee contribution",inputLength:2,onlyNumbers:!0})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(y.U,{label:"Employee Amount",type:m.Ar.number,disabled:!0,name:"employee_amount",placeholder:"Enter employee amount",onlyNumbers:!0})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(y.U,{label:"Employer Contribution (%)",type:m.Ar.number,disabled:!k.minimum_salary,controlled:!0,onChange:function(e){if(e<100){var n=k.minimum_salary/100*e;M.setFieldValue("employer_amount",n)}},name:"employer_contribution",placeholder:"Enter employer contribution",inputLength:2,onlyNumbers:!0})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(y.U,{label:"Employer Amount",type:m.Ar.number,disabled:!0,name:"employer_amount",placeholder:"Enter employer amount",onlyNumbers:!0})}),(0,I.jsx)(s.Z,{span:11,children:(0,I.jsx)(b.Z,{label:"Post",name:"post"})})]})})})},F=t(1752),A=t(2622),D=t(7349),w=t(4992),L=t(2262),N=function(){var e=(0,p.I0)(),n=(0,w.ui)(),t=n.getList,r=n.deleteRecords,u=n.submitRecord,d=n.invalidateList,s=(0,i.useState)(!1),c=(0,a.Z)(s,2),f=c[0],v=c[1],_=(0,i.useState)(null),y=(0,a.Z)(_,2),b=y[0],Z=y[1],g=function(){return v((function(e){return!e}))},E=[{title:"Financial Year Id",dataIndex:"financial_year_id",sorter:function(e,n){return(0,x.$P)(e,n,"financial_year_id")}},{title:"Financial Year Description",dataIndex:"financial_year_description",sorter:function(e,n){return(0,x.Ew)(e,n,"financial_year_description")}},{title:"Financial Year Start Date",dataIndex:"start_date",sorter:function(e,n){return(0,x.Ew)(e,n,"start_date")},render:function(e,n){return(0,j.y4)(n.start_date,m.nH[10])}},{title:"Financial Year End Date",dataIndex:"end_date",sorter:function(e,n){return(0,x.Ew)(e,n,"end_date")},render:function(e,n){return(0,j.y4)(n.end_date,m.nH[10])}},{title:"Minimum Salary",dataIndex:"minimum_salary",sorter:function(e,n){return(0,x.$P)(e,n,"minimum_salary")}},{title:"Employee Contribution",dataIndex:"employee_contribution",sorter:function(e,n){return(0,x.$P)(e,n,"employee_contribution")}},{title:"Employee Amount",dataIndex:"employee_amount",sorter:function(e,n){return(0,x.$P)(e,n,"employee_amount")}},{title:"Employer Contribution",dataIndex:"employer_contribution",sorter:function(e,n){return(0,x.$P)(e,n,"employer_contribution")}},{title:"Employer Amount",dataIndex:"employer_amount",sorter:function(e,n){return(0,x.$P)(e,n,"employer_amount")}},{title:"Post",dataIndex:"post",sorter:function(e,n){return(0,x.$P)(e,n,"post")},render:function(e,n){return(0,I.jsx)(L.Z,{value:null===n||void 0===n?void 0:n.post,controlled:!0,disabled:!0})}},{title:"Action",dataIndex:"action",render:function(n,t){return(0,I.jsx)(D.Z,{menu:!0,options:[{label:"Edit",buttonType:"primary",icon:(0,I.jsx)(F.Z,{}),onClick:function(){return function(e){Z(e),g()}(t)}},{label:"Delete",buttonType:"danger",icon:(0,I.jsx)(A.Z,{}),confirmAction:!0,onClick:function(){return n=t.id,e((0,h.S)(!0)),void r.mutateAsync(n).then((function(){e((0,h.S)(!1)),Z(null)})).catch((function(){return e((0,h.S)(!1))}));var n}}]})}}],C=[{label:"Add",key:"add",onClick:function(){Z(null),g()}}],N=t.isError?[]:(null===t||void 0===t?void 0:t.data)||[];return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(S,{submitRecord:u,invalidateList:d,open:f,onCancel:g,selected:b}),(0,I.jsx)(l.Z,{name:"EOBI",buttons:C}),(0,I.jsx)("div",{className:"app_page_content",children:(0,I.jsx)(o.Z,{columns:E,data:N,loading:t.isLoading,searchKeys:["financial_year_id","financial_year_description","minimum_salary","employee_contribution","employee_amount","employer_contribution","employer_amount"]})})]})}}}]);
//# sourceMappingURL=5109.7bafcb31.chunk.js.map
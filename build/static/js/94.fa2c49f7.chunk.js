"use strict";(self.webpackChunkerp_web=self.webpackChunkerp_web||[]).push([[94],{2262:function(e,t,n){n.d(t,{Z:function(){return l}});var o=n(1413),r=(n(2791),n(7846)),a=n(9862),c=n(3329);function l(e){var t=e.name,n=e.label,l=e.className,i=void 0===l?"":l,u=e.controlled,d=void 0!==u&&u,s=e.value,h=e.onChange,v=e.disabled,m=function(e){return h(e.target.checked)};return(0,c.jsx)(r.Z.Item,{name:t,className:"custom_checkbox",valuePropName:"checked",children:(0,c.jsx)(a.Z,(0,o.Z)((0,o.Z)({},function(){var e={className:"antd-input-checkbox-custom ".concat(i),disabled:v};return d&&(e.checked=s,e.onChange=m),e}()),{},{children:n}))})}},94:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var o=n(4942),r=n(1413),a=n(9439),c=n(2791),l=n(5145),i=n(3782),u=n(1752),d=n(2622),s=n(7462),h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zm32-104H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180zm304 664H360V568h304v276zm200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z"}}]},name:"printer",theme:"outlined"},v=n(4291),m=function(e,t){return c.createElement(v.Z,(0,s.Z)({},e,{ref:t,icon:h}))};var f=c.forwardRef(m),g={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},p=function(e,t){return c.createElement(v.Z,(0,s.Z)({},e,{ref:t,icon:g}))};var b=c.forwardRef(p),Z=n(7349),_=n(5421),x=n(1902),j=n(9434),S=n(1483),C=n(7689),N=n(9543),I=n(6765),T=n(2677),V=n(1736),k=n(6106),O=n(914),A=n(5806),y=n(8468),z=n(35),H=n(8588),P=n(7001),w=n(5531),D=n(7246),E=n(1367),L=n(3329);function M(e){var t,n,o,r=e.form,a=e.search,c=e.onChange,l=e.onSearch,i=e.POST_OPTIONS,u=null!==(t=null===(n=a.account)||void 0===n||null===(o=n.option)||void 0===o?void 0:o.GL_SUB_ACCOUNT_GROUPS)&&void 0!==t?t:"";return(0,L.jsx)(z.Z,{children:(0,L.jsx)(V.Z,{name:"journalVouchersSearchForm",className:"p-5 journal_voucher",form:r,children:(0,L.jsxs)(k.Z,{align:"bottom",justify:"space-between",gap:5,gutter:{xs:8,sm:16,md:24,lg:32},children:[(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(A.U,{label:"Voucher Code",type:I.Ar.number,messageLabel:"voucher code",placeholder:"Enter Voucher Code",controlled:!0,value:a.voucher_code,onChange:function(e){return c("voucher_code",e)}})}),(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(y.Z,{controlled:!0,value:a.books,onChange:function(e){return c("books",e)}})}),(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(H.Z,{label:"Voucher Date",messageLabel:"voucher date",placeholder:"Enter Voucher Date",controlled:!0,value:a.voucher_date,onChange:function(e){return c("voucher_date",e)}})}),(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(A.U,{label:"Narration",type:I.Ar.text,messageLabel:"Narration",placeholder:"Enter Narration",controlled:!0,value:a.narration,onChange:function(e){return c("narration",e.target.value)}})}),(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(A.U,{label:"Detail Narration",type:I.Ar.text,messageLabel:"Detail Narration",placeholder:"Enter detail narration",controlled:!0,value:a.detail_narration,onChange:function(e){return c("detail_narration",e.target.value)}})}),(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(w.Z,{value:a.account,onChange:function(e){return c("account",e)}})}),(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(D.Z,{value:a.subAccount,accountId:u,onChange:function(e){return c("subAccount",e)},disabled:!u})}),(0,L.jsx)(O.Z,{lg:6,md:8,sm:11,children:(0,L.jsx)(E.Z,{label:"Post",messageLabel:"post",options:i,placeholder:"Select",controlled:!0,value:a.post,onChange:function(e){return c("post",e)}})}),(0,L.jsx)(O.Z,{lg:4,md:10,sm:11,children:(0,L.jsx)(P.Z,{label:"Search",className:"w-50 mt-4",onClick:l})})]})})})}var F=n(7846),G=n(9655),U=n(9896),B=n(6432),R=n(2262),J=n(2014),$=n(739),K=n(9625),X=n(8678),Y=n(5429),q=[{label:"All",value:"all"},{label:"Yes",value:"1"},{label:"No",value:"0"}];function Q(){var e=(0,C.s0)(),t=(0,j.I0)(),n=F.Z.useForm(),s=(0,a.Z)(n,1)[0],h=(0,x.s)().deleteRecords,v=(0,X.O)().getList,m=v.isError?[]:(null===v||void 0===v?void 0:v.data)||[],g=(0,c.useMemo)((function(){return(0,B.X)(m,"id")}),[m]),p=(0,c.useState)(null),V=(0,a.Z)(p,2),k=V[0],O=V[1],A=(0,c.useState)((0,r.Z)({},I.G2)),y=(0,a.Z)(A,2),z=y[0],H=y[1],P=(0,c.useState)({voucher_code:"",books:[],voucher_date:null,narration:"",detail_narration:"",account:(0,r.Z)({},I.$I),subAccount:(0,r.Z)({},I.$I),post:"all"}),w=(0,a.Z)(P,2),D=w[0],E=w[1],Q=function(e,t,n,o){var a={limit:t,page:e};"all"!==D.post&&(a.post=D.post),D.narration&&(a.narration=D.narration),D.detail_narration&&(a.detail_narration=D.detail_narration),D.voucher_code&&(a.voucher_code=D.voucher_code.toString()),D.voucher_date&&(a.voucher_date=(0,N.LM)(new Date(D.voucher_date),I.nH[9])),D.account.option&&(a.main_account_id=D.account.option.value),D.subAccount.option&&(a.sub_account_id=D.subAccount.option.value),D.books.length>0&&(a.book_id=D.books.toString()),n&&o&&(a.sort_name=o,a.sort_type="ascend"===n?"asc":"desc"),H((0,r.Z)((0,r.Z)({},z),{},{loading:!0})),(0,U.lD)(a).then((function(a){var c;H((0,r.Z)((0,r.Z)({},z),{},{loading:!1,data:(0,B.j)(null===(c=a.data)||void 0===c?void 0:c.data),total:a.data.total_records,current:e,pageSize:t,sortOrder:n,sortField:o}))})).catch((function(e){H((0,r.Z)((0,r.Z)({},z),{},{loading:!1})),G.Am.error((0,_.nU)(e))}))};(0,c.useEffect)((function(){Q(z.current,z.pageSize,z.sortOrder,z.sortField)}),[]);var W=[{title:"Voucher Code",dataIndex:"voucher_code",sorter:!0},{title:"Book",dataIndex:"ST_BOOK_DESC",sorter:!0},{title:"Voucher Date",dataIndex:"voucher_date",render:function(e,t){return(0,N.y4)(t.voucher_date,I.nH[10])},sorter:!0},{title:"Narration",dataIndex:"voucher_narration",sorter:!0},{title:"Post",dataIndex:"POST",render:function(e,t){return(0,L.jsx)(R.Z,{value:t.POST,controlled:!0,disabled:!0})},sorter:!0},{title:"Action",dataIndex:"action",render:function(n,o){return(0,L.jsx)(Z.Z,{menu:!0,options:[{label:"Edit",buttonType:"primary",icon:(0,L.jsx)(u.Z,{}),onClick:function(){return e("".concat(T.at,"/").concat(o.voucher_id))}},{label:"Delete",buttonType:"danger",icon:(0,L.jsx)(d.Z,{}),confirmAction:1!=o.POST,onClick:function(){return function(e,n){if(1==n)return G.Am.error("Journal Voucher is Posted can't Delete.");t((0,S.S)(!0)),h.mutateAsync(e).then((function(){t((0,S.S)(!1)),Q(I.G2.current,I.G2.pageSize,z.sortOrder,z.sortField)})).catch((function(){return t((0,S.S)(!1))}))}(o.voucher_id.toString(),o.POST)}},{label:"Print",buttonType:"primary",icon:(0,L.jsx)(f,{}),onClick:function(){return e=o.voucher_id,void(0,U.MS)(e).then((function(e){var n,o=(0,Y.d)(null===(n=e.data)||void 0===n?void 0:n.voucherDetails),a=o.totalCredit,c=o.totalDebit,l=o.difference;O((0,r.Z)((0,r.Z)({},e.data),{},{totalCredit:a,totalDebit:c,difference:l})),t((0,S.S)(!1)),setTimeout((function(){(0,$.z)(K.Cs.JV_PRINT_CONTENT_LIST),O(null)}),10)})).catch((function(e){t((0,S.S)(!1)),G.Am.error((0,_.nU)(e))}));var e}},{label:"JV Copy",buttonType:"primary",icon:(0,L.jsx)(b,{}),onClick:function(){return e("".concat(T.at,"/new"),{state:{id:o.voucher_id}})}}]})}}],ee=[{label:"Add",onClick:function(){return e("".concat(T.at,"/new"))}}];return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(i.Z,{name:"Journal Vouchers",buttons:ee}),(0,L.jsx)(J.Z,{containerId:K.Cs.JV_PRINT_CONTENT_LIST,costCentresById:g,data:k}),(0,L.jsxs)("div",{className:"app_page_content",children:[(0,L.jsx)(M,{form:s,search:D,onChange:function(e,t){var n=(0,o.Z)({},e,t);"account"===e&&null==t.option&&(n.subAccount=(0,r.Z)({},I.$I)),E((0,r.Z)((0,r.Z)({},D),n))},onSearch:function(){Q(I.G2.current,I.G2.pageSize,z.sortOrder,z.sortField)},POST_OPTIONS:q}),(0,L.jsx)(l.Z,(0,r.Z)((0,r.Z)({rowKey:"voucher_code",columns:W},z),{},{onChange:function(e,t,n,o){var r,a=o.action;if([I.IN.sort,I.IN.paginate].includes(a)){var c=e.pageSize===z.pageSize?e.current:I.G2.current,l=e.pageSize,i=a===I.IN.sort?null!==(r=n.order)&&void 0!==r?r:"":z.sortOrder,u=a===I.IN.sort?i?n.field:"":z.sortField;Q(c,l,i,u)}},searchAble:!1}))]})]})}}}]);
//# sourceMappingURL=94.fa2c49f7.chunk.js.map